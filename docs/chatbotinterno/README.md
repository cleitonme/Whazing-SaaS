# ü§ñ CHAT BOT INTERNO

## üß≠ Escolha e Prioridade dos Bots

> ‚ö†Ô∏è **Aten√ß√£o:** Se a **fila** associada ao canal tiver **integra√ß√£o ativa**, o bot **n√£o ser√° acionado**.

O sistema utiliza **quatro crit√©rios de prioridade** para definir **qual bot ser√° usado** em novos tickets.
Eles s√£o avaliados **nessa ordem**:

---

### 1Ô∏è‚É£ Lane do CRM

Todos os contatos vinculados a uma *lane* espec√≠fica do CRM seguir√£o o bot configurado para ela.
Ao enviar uma mensagem para o n√∫mero do sistema, se **n√£o houver tickets abertos ou pendentes**, o bot dessa *lane* ser√° acionado.

![print](crm.png)

---

### 2Ô∏è‚É£ Palavra-chave

Permite definir palavras que acionam um bot espec√≠fico.
Exemplo: se voc√™ cadastrar a palavra **"comprar"**, e o cliente enviar **"Eu quero comprar"**, a mensagem ser√° direcionada ao bot configurado.

> ‚ö†Ô∏è Observa√ß√£o: a palavra-chave s√≥ funciona **na primeira mensagem** de um novo ticket.
> Se o cliente enviar ‚Äúoi‚Äù e depois ‚Äúquero comprar‚Äù, **n√£o ser√° reconhecida**.

---

### 3Ô∏è‚É£ Canal

Cada canal pode ter um bot pr√≥prio.
Quando o cliente envia uma mensagem para o n√∫mero do sistema, caso **n√£o existam tickets abertos ou pendentes**, o bot configurado nesse canal ser√° utilizado.

![print](canais.png)

---

### 4Ô∏è‚É£ Configura√ß√µes Globais

Se nenhum dos crit√©rios anteriores se aplicar, o sistema usar√° o **bot configurado no fluxo ativo padr√£o**.

---

Essas prioridades determinam **qual bot ser√° acionado** sempre que uma nova mensagem for recebida **sem ticket aberto ou pendente**.
Garanta que cada bot esteja corretamente configurado em seu respectivo n√≠vel para que o atendimento funcione conforme o esperado.

---

## üìö √çndice

1. [Configura√ß√£o de Fluxo](#configura√ß√£o-de-fluxo)
2. [Ordem das Intera√ß√µes](#ordem-das-intera√ß√µes)
3. [Configura√ß√£o de Condi√ß√µes](#configura√ß√£o-de-condi√ß√µes)
4. [Exemplos Pr√°ticos de Fluxos](#exemplos-pr√°ticos-de-fluxos)

---

## ‚öôÔ∏è Configura√ß√£o de Fluxo

A configura√ß√£o do fluxo do chatbot √© feita pela interface visual:

![print](montagembot.png)

### üîß Elementos B√°sicos de Configura√ß√£o

![print](configfluxo.png)

A partir da vers√£o **2.11.0**, est√£o dispon√≠veis as seguintes intera√ß√µes:

---

### üí¨ Enviar Mensagem

* Permite definir o texto a ser enviado ao cliente.
* Suporta **vari√°veis din√¢micas** (veja se√ß√£o de vari√°veis).

### üìé Enviar Documentos, V√≠deos, √Åudios e Arquivos

* Envio de qualquer tipo de arquivo.

### üòÑ Enviar Figurinhas

* Converte automaticamente qualquer imagem enviada em **figurinha**.

### üìç Enviar Localiza√ß√£o

* Envia localiza√ß√£o para o contato.
* **Compat√≠vel apenas com a WHATSAPP oficial e n√£o oficial.**

### ‚è±Ô∏è Adicionar Delay

* Define o tempo (em segundos) entre as mensagens.
* Garante a **sequ√™ncia correta de envio**.

### üè∑Ô∏è Adicionar Tag

* Marca o contato com uma etiqueta espec√≠fica.

### üìÇ Adicionar CRM

* Move o contato para uma *lane* do CRM compartilhado.

### üîÅ Alterar Follow-up

* Adiciona ou remove o cliente de um **follow-up**.

### üåê HTTP Request

* Permite realizar requisi√ß√µes externas e gravar o resultado em vari√°veis.

### ‚ö° For√ßar Execu√ß√£o de Condi√ß√µes

* Executa condi√ß√µes sem esperar uma nova mensagem.
  *Exemplo:* fazer uma requisi√ß√£o HTTP, salvar o resultado e comparar a vari√°vel obtida.

### üóÇÔ∏è Adicionar Lista

* Compat√≠vel com **API oficial** e **API Plus**.
* Funciona parcialmente no **Baileys** (sem suporte oficial, pode parar a qualquer momento).

![print](lista.png)
![print](lista2.png)

### üîò Enviar Bot√µes

* Compat√≠vel com **WhatsApp oficial**, **Facebook**, **Instagram** e **API Plus**.
* M√°ximo de **3 bot√µes**.

![print](botao.png)

### üîó Bot√£o com Link

* Compat√≠vel com **API oficial** e **API Plus**.

![print](links.png)

### üìç Solicitar Localiza√ß√£o

* Envia bot√£o solicitando a localiza√ß√£o do cliente.
* √ötil para servi√ßos de **entrega**.
* Compat√≠vel com **API oficial** e **API Plus**.

![print](solicitarlocalizacao.png)

### üß© Bot√£o Din√¢mico

* Exclusivo da **API Plus**.
* Permite misturar tipos de bot√µes: resposta, link, c√≥pia, liga√ß√£o, etc.
* Alguns dispositivos pode aparecer mensagem n√£o compativel

![print](dinamico.png)

### üé† Carrossel de M√≠dia

* Exclusivo da **API Plus**.
* Envie v√°rias imagens com bot√µes interativos abaixo delas.
* Alguns dispositivos pode aparecer mensagem n√£o compativel

![print](carrossel1.png) ![print](carrossel2.png)

---

## üîÑ Ordem das Intera√ß√µes

![print](configfluxo2.png)

> ‚ö†Ô∏è **Importante:**
>
> * Os n√∫meros indicam a **sequ√™ncia exata de execu√ß√£o**.
> * Use **delays** entre mensagens m√∫ltiplas para manter a ordem correta.

---

## üß© Configura√ß√£o de Condi√ß√µes

![print](condicoes.png)

### Tipos de Condi√ß√µes (em ordem de prioridade)

#### üïì Dentro/Fora do Hor√°rio de Atendimento

* Funciona apenas na etapa **"Boas-vindas!"**.
* Deve estar **no in√≠cio** das condi√ß√µes.
* Define a√ß√µes diferentes para dentro ou fora do hor√°rio comercial.

#### ‚úÖ Respostas Exatas

* Exemplo: ‚Äú1‚Äù ou ‚Äú01‚Äù.
* A resposta precisa ser **id√™ntica** ao configurado.

#### üîç Cont√©m Exato

* Reconhece **frases completas**.
  Exemplo: ‚ÄúEu quero comprar um t√™nis‚Äù.

#### üß† Cont√©m

* Reconhece partes da frase.
  Exemplo: ‚Äúcomprando‚Äù, ‚Äúcomprador‚Äù ‚Üí reconhece ‚Äúcompra‚Äù.

#### ‚ú≥Ô∏è Qualquer Resposta

* Sempre posicionada **por √∫ltimo**.
* Captura qualquer resposta n√£o reconhecida.

#### ‚è∞ Dentro/Fora de Hor√°rio Personalizado

* Define a√ß√µes espec√≠ficas conforme hor√°rios configurados manualmente.

#### üßÆ Compara√ß√£o de Vari√°veis

* Permite comparar valores fixos, vari√°veis existentes ou verificar se uma vari√°vel foi definida.

---

### ‚ö†Ô∏è Respostas Inesperadas

Se nenhuma condi√ß√£o for atendida, o bot enviar√°:

> ‚ÄúDesculpe! N√£o entendi sua resposta. Vamos tentar novamente! Escolha uma op√ß√£o v√°lida.‚Äù

*(Essa mensagem pode ser personalizada nas configura√ß√µes.)*

---

## ‚öôÔ∏è Configura√ß√µes Gerais

<figure><img src="../../.gitbook/assets/image (10).png"></figure>
<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1).png"></figure>

**Op√ß√µes dispon√≠veis:**

* **Mensagem de sauda√ß√£o (Fila/Usu√°rio):** enviada ao transferir ticket.
* **Se nenhuma resposta for enviada:** mensagem padr√£o caso nenhuma condi√ß√£o seja cumprida.
* **Aus√™ncia de resposta:** define a√ß√£o ap√≥s determinado tempo sem intera√ß√£o.
* **M√°ximo de tentativas do bot:** define o que fazer se o cliente n√£o responder corretamente.
* Outras configura√ß√µes podem ser ajustadas conforme necessidade.

---

## üß† Exemplos Pr√°ticos de Fluxos

### 1Ô∏è‚É£ Fluxo com Hor√°rio de Atendimento

Ideal para empresas com **plant√£o ou suporte emergencial**.

![print](horario1.jpg) ![print](horario2.jpg)

[Baixar exemplo](horario_de_atendimento.json)

---

### 2Ô∏è‚É£ Fluxo com Vari√°veis Din√¢micas

Permite personalizar mensagens com **dados do cliente**.

[Baixar exemplo](exemplo_fluxo_usando_novas_variaveis.json)

**Exemplo de uso:**

```text
Template:
Por favor, confirme se seu endere√ßo √© {{endereco}}?
1 - Sim
2 - N√£o

Mensagem enviada:
Por favor, confirme se seu endere√ßo √© Rua Marechal Deodoro, 11?
1 - Sim
2 - N√£o
```

---

### 3Ô∏è‚É£ Fluxo de Agendamento com Cal.com

Integra√ß√£o com [https://cal.com/](https://cal.com/)

![print](barbearia.jpg)

[Baixar exemplo](agendamentobarbearia.json)

![print](barbeariabotao.jpeg)

[Baixar exemplo com bot√µes](agendamentobarbeariabotao.json)

---

### 4Ô∏è‚É£ Fluxo sobre Whazing (lista, bot√£o e links)

[Baixar exemplo](exemplo_whazing.json)

---

### 5Ô∏è‚É£ Fluxo com HTTP Request e Compara√ß√£o de Vari√°vel

Exemplo que valida **CEP e cidade** via API.

[Baixar exemplo](exemplo_http_request.json)

---

### 6Ô∏è‚É£ Fluxo para Teste de API SaaS

Usa **HTTP Request** para gerar teste autom√°tico para o cliente.

[Baixar exemplo](exemplo_teste_whazing.json)

---

### 7Ô∏è‚É£ Fluxo de Boas-vindas Simples

Envia mensagem de boas-vindas e direciona o cliente para uma fila.

[Baixar exemplo](boas_vindas.json)

> Usa ‚ÄúFor√ßar executar condi√ß√µes‚Äù para simular uma resposta autom√°tica e avan√ßar o fluxo.

---

### 8Ô∏è‚É£ Sele√ß√£o de Fila por Palavra-chave

[Baixar exemplo](bot_por_palavra_chat.json)

Permite enviar o cliente para uma fila espec√≠fica conforme a palavra digitada.
Com ‚ÄúIniciar Integra√ß√£o ao transferir‚Äù, o sistema j√° ativa a integra√ß√£o automaticamente.

---

### 9Ô∏è‚É£ Consulta de CPF via API

[Baixar exemplo](consulta_cpf.json)

Usa a API p√∫blica [cpfhub.io](https://www.cpfhub.io/).

> O token do exemplo √© limitado; recomenda-se gerar um novo para testes.

---

### 1Ô∏è‚É£ 0Ô∏è‚É£ Bot muda comportamento conforme horario

[Baixar exemplo](botporhorario.json)

Esse modelo apresenta diversos exemplos de como o bot interno pode ser utilizado.
De acordo com o hor√°rio em que o cliente entra em contato, ele envia automaticamente uma mensagem informando o hor√°rio de atendimento.
Se o cliente escolher a op√ß√£o **‚ÄúRetirar na loja‚Äù**, o bot envia a **localiza√ß√£o da loja**.
Al√©m disso, o bot solicita o **CNPJ do cliente** e salva o valor em uma **vari√°vel** ‚Äî caso essa informa√ß√£o j√° exista, o atendimento √© encaminhado diretamente para a equipe.